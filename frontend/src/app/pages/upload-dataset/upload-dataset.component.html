<p-toast></p-toast>
<div class="container">
  <div class="row">
    <div class="card-body text-center">
      <h4 class="mt-3">
        <span class="titulo">Seleccione un archivo para consultar:</span>
      </h4>
      <div class="row row-cols-sm-2">
        <div
          class="py-2 col-10 col-sm-10 col-md-7 col-lg-6 offset-1 offset-sm-1 offset-md-1 offset-lg-2"
        >
          <input
            (change)="this.onFilechange($event)"
            class="form-control"
            type="file"
            id="formFile"
            accept=".csv, .xlsx"
            #inputFile
          />
        </div>
        <div class="py-1 col-md-1 col-lg-1 offset-sm-3 offset-md-0">
          <p-splitButton
            icon="pi pi-download"
            label="Formato"
            styleClass="p-button-sm p-button-raised p-button-success"
            [model]="opcionesArchivo"
          >
          </p-splitButton>
        </div>
      </div>
      <div class="py-2">
        <button class="me-1 btn btn-primary" (click)="this.subirArchivo()">
          Aceptar
        </button>
        <button class="ms-1 btn btn-light" (click)="this.limpiarFormulario()">
          Limpiar
        </button>
      </div>
    </div>
  </div>
  <div *ngIf="mostrarComboBoxColumnas" class="row">
    <div class="col-lg-6 offset-lg-3">
      <div class="card-body text-center">
        <div class="m-2">
          <p-dropdown
            [formControl]="this.formGroup.controls['columna']"
            [options]="listaComboBox"
            optionLabel="valor"
            optionValue="id"
            placeholder="Seleccione un autor"
            [filter]="true"
            filterBy="valor"
            (onChange)="this.consultarSimilitudDataset()"
          >
          </p-dropdown>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="mostrarTablas" class="row">
    <div class="row">
      <div class="py-2 col-9 col-sm-10 col-md-10 col-lg-8 offset-2">
        <textarea
          class="col-12 col-sm-10 col-md-10 col-lg-12"
          rows="5"
          pInputTextarea
          [formControl]="this.formGroup.controls['definicion']"
          [disabled]="true"
        >
        </textarea>
      </div>
    </div>
    <div class="py-1 col col-sm-6 col-md-6 col-lg-6">
      <p-table [value]="listaSimilitudJaccard" styleClass="tablas-similitud">
        <ng-template pTemplate="caption">
          <div class="text-center">Similitud Jaccard</div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th class="text-center col-3 col-sm-3 col-md-3 col-lg-3">
              Enfoque
            </th>
            <th class="text-center col-3 col-sm-3 col-md-3 col-lg-3">
              Porcentaje
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-row>
          <tr>
            <td class="text-center" style="font-size: 0.94rem">
              {{ row.enfoque }}
            </td>
            <td class="text-center">
              <p-progressBar
                [value]="row.porcentaje.toFixed(2)"
                [showValue]="false"
              ></p-progressBar>
              {{ row.porcentaje.toFixed(2) }} %
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
    <div class="py-1 col col-sm-6 col-md-6 col-lg-6">
      <p-table [value]="listaSimilitudCoseno" styleClass="tablas-similitud">
        <ng-template pTemplate="caption">
          <div class="text-center">Similitud Coseno</div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th class="text-center col-3 col-sm-3 col-md-3 col-lg-3">
              Enfoque
            </th>
            <th class="text-center col-3 col-sm-3 col-md-3 col-lg-3">
              Porcentaje
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-row>
          <tr>
            <td class="text-center" style="font-size: 0.94rem">
              {{ row.enfoque }}
            </td>
            <td class="text-center">
              <p-progressBar
                [value]="row.porcentaje.toFixed(2)"
                [showValue]="false"
              ></p-progressBar>
              {{ row.porcentaje.toFixed(2) }} %
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
<div style="height: 6rem"></div>
<!-- Footer -->
<footer class="bg-light mt-auto fixed-bottom" style="height: 75px">
  <div class="position-relative">
    <div class="position-absolute py-3 ms-3">
      <a href="https://www.ups.edu.ec/" target="_blank">
        <img
          class="logo-UPS"
          src="../../../assets/logo-UPS.png"
          alt="Universidad PolitÃ©cnica Salesiana"
        />
      </a>
    </div>
    <div class="position-absolute top-50 end-0 py-3 me-3">
      <a
        href="https://github.com/jpillajo/backend-nlp-dementia"
        target="_blank"
      >
        <img
          class="url-repositorio"
          src="../../../assets/logo-github.png"
          alt="Repositorio de Github"
        />
      </a>
    </div>
  </div>
</footer>
